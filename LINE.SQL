
DROP TABLE GUEST;
DROP TABLE EVENT_INSTANCE;
DROP TABLE EVENT;
DROP TABLE LOCATION;
DROP TABLE PERSON;

CREATE TABLE PERSON(
    PID VARCHAR(255),
    P_NAME VARCHAR(255),
    P_EMAIL VARCHAR(255),
    PRIMARY KEY (PID)
);


CREATE TABLE LOCATION(
    LOCATION_ID INT,
    LOCATION_NAME VARCHAR(255),
    CAPACITY INT,
    PRIMARY KEY(LOCATION_ID)
);

CREATE TABLE EVENT(
    EVENT_ID INT,
    EVENT_NAME VARCHAR(255),
    PID VARCHAR(255),
    LOCATION_ID INT,
    START_DATE DATE,
    END_DATE DATE,
    DAY_OF_WEEK NUMBER,
    E_START_TIME TIMESTAMP,
    E_ENDTIME TIMESTAMP,
    RECURRING NUMBER,
    PRIMARY KEY(EVENT_ID),
    FOREIGN KEY(LOCATION_ID) REFERENCES LOCATION(LOCATION_ID),
    FOREIGN KEY (PID) REFERENCES PERSON(PID)
);

CREATE TABLE EVENT_INSTANCE(
    INSTANCE_ID INT,
    EVENT_ID INT,
    I_START_TIME TIMESTAMP,
    I_END_TIME TIMESTAMP,
    STATUS NUMBER,
    PRIMARY KEY (INSTANCE_ID),
    FOREIGN KEY (EVENT_ID) REFERENCES EVENT(EVENT_ID)

);

CREATE TABLE GUEST(
    EVENT_ID INT,
    PID VARCHAR(255),
    PRIMARY KEY (EVENT_ID, PID),
    FOREIGN KEY (EVENT_ID) REFERENCES EVENT(EVENT_ID),
    FOREIGN KEY (PID) REFERENCES PERSON (PID)
);

INSERT INTO PERSON VALUES('HU59292','ABEL','AN1@UMBC.EDU');
INSERT INTO LOCATION VALUES(1,'BOLE',2000);
INSERT INTO EVENT VALUES (1, 'BIRTHDAY', 'HU59292', 1, DATE '2005-08-01', DATE '2005-09-01', 1, TIMESTAMP '2025-02-11 10:30:00', TIMESTAMP '2025-03-01 11:40:00', 1);
INSERT INTO EVENT_INSTANCE VALUES(1,1,TIMESTAMP'2025-08-1 10:30:00',TIMESTAMP'2025-01-01 11:45:00',2);
INSERT INTO GUEST VALUES (1,'HU59292');


SELECT * FROM PERSON;
SELECT * FROM LOCATION;
SELECT * FROM EVENT;
SELECT * FROM EVENT_INSTANCE;
SELECT * FROM GUEST;

